<beans:beans xmlns="http://www.springframework.org/schema/flex"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
              http://www.springframework.org/schema/security http://www.springframework.org/schema/flex/spring-flex-1.0.0.xsd"> 
    
    <!-- expanded version -->
    <messageBroker id="customId" configuration-manager-ref="" services-config-path="/WEB-INF/flex/services-config.xml">
    	<config-processor ref="myCustomConfigProcessorBean"/>
    	<mapping pattern="/*"/>
    	<security auth-manager-ref="_authenticationManager" access-decision-manager-ref="_accessManager" 
    		per-client-authentication="false">
	    	<secure-endpoint channel="my-secure-amf" access="ROLE_USER, ROLE_ADMIN"/>
	    	<secure-endpoint pattern="**/messagebroker/*" access="ROLE_ANONYMOUS"/>
		</security>
		<remoting-adapter class="foo.bar.CustomAdapter"/>
    </messageBroker>

    <remote-service ref="ping" service-id="pingRemote" exclude-methods="foo, bar" include-methods="baz"/>
	<remote-service ref="productService" channels="my-amf, my-secure-amf"/>

    <!-- minimal version -->
    <messageBroker>
    	<security/>
    </messageBroker>

	<remote-service ref="ping"/>
	<remote-service ref="productService"/>

</beans:beans>


<!-- nested remoting with "beans" as the top-level namespace-->
<bean id="foo" class="com.bar.MyClass">
    <flex:remote-service/>
</bean>